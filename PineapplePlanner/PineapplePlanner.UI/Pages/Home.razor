@using MediatR
@using PineapplePlanner.Application.Interfaces
@using PineapplePlanner.Domain.Entities

@page "/"

@inject IMediator _mediator
@inject ITaskRepository _taskRepository

<div class="overview">
    Todos:
    <br />

    @if (_tasksResult.Data != null)
    {
        @foreach (Domain.Entities.Task task in (_tasksResult.Data ?? new()).OrderByDescending(t => t.CreatedAt))
        {
            <div>@task.Id @task.Name @task.DateDue.ToString() @task.Priority</div>
        }
    }
    else if (_tasksResult.Errors.Any())
    {
        @foreach (string error in _tasksResult.Errors)
        {
            <div>@error</div>
        }
    }
    else
    {
        <div>Loading...</div>
    }
</div>
